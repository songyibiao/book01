# 电机速度闭环PID控制

> 本小节教你使用增量式 PID 算法，对带编码器的直流减速电机进行速度闭环控制。

### M 法测速原理

在《Timer编码器模式读取编码器》一节中，我们已经用到 M 法测速，但并未对其原理作讲解。M 法测速原理其实很简单，就是数固定时间段内的脉冲数，再用脉冲数除于时间得到速度。脉冲数是速度的一个表征量，用固定时间段内累计的脉冲数除于该固定时间，就可以求得该固定时间段的平均速度。固定时间段的时间越短，所求得的速度就越接近瞬时速度。

我们的电机上装有霍尔编码器，编码器的码盘跟电机转子同轴安装，电机转动时，码盘也随轴同转，并且转一圈会输出一定数量的脉冲。M 法是数固定时间内产生的脉冲数，在实际工程中比较好实现。而 T 法是数两个脉冲间隔的时间，T 法测速在实际工程中比较少用。

### 速度闭环 PID 控制

速度闭环 PID 控制，就是用速度测量值与目标值进行作差，得到控制偏差，然后通过对偏差的 PID 控制，使偏差趋向于零。

进入我们上修改过的 MiaowLabs-Demo 文件夹，再打开里面的 MDK-ARM 文件夹，找到 MiaowLabs-Demo.uvprojx 工程文件，双击，打开工程。



